# TDD開発フロー

このプロジェクトではテスト駆動開発（TDD）を採用する。以下のフローに従うこと。

## TDDの基本フロー

```
仕様決定 → テストケース提示 → 承認 → テスト作成 → Red → 実装 → Green → リファクタリング → 次の仕様
```

1. **仕様決定** - 実装する機能の仕様を明確にする
2. **テストケース提示** - 仕様に基づいてテストケースを一覧で提示する（コードは書かない）
3. **テストケース承認** - 人間がテストケースの妥当性・網羅性を確認し承認する
4. **テスト作成** - 承認されたテストケースをコードとして実装する
5. **テスト実行（Red）** - テストが失敗することを確認する
6. **実装（Green）** - テストが通る最小限の実装を行う
7. **テスト実行（確認）** - 全てのテストが通ることを確認する
8. **リファクタリング** - 必要に応じてコードを改善する（テストは変更しない）

## 重要なルール

### 1. テストケースの事前承認

- テストコードを書く前に、テストケース一覧を提示して承認を得る
- **承認なしにテストコードを書き始めない**
- テストケース提示時は以下の形式で一覧化する：
  - 正常系: 期待される動作のテストケース
  - 異常系: エラーハンドリングのテストケース
  - エッジケース: 境界値や特殊なケースのテストケース

### 2. テストコードの書き換え禁止

- テストを通すためにテストコードを修正することは禁止
- テストが間違っている場合は、仕様を再確認してから修正する
- テストの修正が必要な場合は、明確な理由を説明する

### 3. 小さい実装単位

- 1つの関数は単一責任で小さく保つ
- **1つの関数に対するテストケースは5〜10個程度**（レビュー可能な規模）
- 大きな機能は複数の小さい関数に分割する
- テストケースが10個を超える場合は関数の分割を検討する

### 4. 段階的な進行

- 1つの関数の実装・テスト・レビューが完了してから次の仕様に進む
- 各ステップでレビュアーが変更を追いやすいようにする
- レビュー → 承認 → 次の仕様のサイクルを守る

## テストの命名規則

```typescript
describe('対象の機能やモジュール名', () => {
  describe('正常系', () => {
    it('〜の場合、〜となる', () => { ... });
  });
  describe('異常系', () => {
    it('〜の場合、エラーとなる', () => { ... });
  });
  describe('エッジケース', () => {
    it('〜の場合でも正しく処理される', () => { ... });
  });
});
```
